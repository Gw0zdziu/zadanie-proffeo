<div class="flex justify-center flex-col mx-auto my-4  w-[95%] md:w-[50%]">
  <app-input [loading]="loadingSearch" (searchMoviesOutput)="searchMovies($event)"></app-input>
  @if (dataTable.data.length !== 0) {
    <app-input [loading]="loadingFilter" (searchMoviesOutput)="filterMovies($event)"></app-input>
    <div class="overflow-x-auto shadow-xl">
      <table mat-table matSort [dataSource]="dataTable" cdkDropList
             cdkDropListOrientation="horizontal"
             cdkDropListLockAxis="x"
             (matSortChange)="sort()"
             (cdkDropListDropped)="drop($event)">
        @for (column of columns; track $index) {
          <ng-container [matColumnDef]="column">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> {{ column }}</th>
            <td mat-cell *matCellDef="let element">
              @if (column === 'Poster') {
                <img class="w-16 md:w-32 max-w-full max-h-full" [src]="element[column]">
              } @else {
                <span class="text-balance">{{ element[column] }}</span>
              }
            </td>
          </ng-container>
        }
        <tr mat-header-row *matHeaderRowDef="columns"></tr>
        <tr mat-row *matRowDef="let row; columns: columns"></tr>
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell text-center text-xl" colspan="4">{{ errorResponse }}</td>
        </tr>
      </table>

    </div>
  } @else if (errorResponse) {
    <span class="text-center text-xl">{{errorResponse}}</span>
  }
</div>

